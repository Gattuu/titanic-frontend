<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
    <title>Survival Prediction on Titanic Dataset</title>
</head>
<body>
    <div class="flex content-between flex-wrap bg-gray-200 h-48">
        <div class="w-1/3 p-2">
          <div class="text-gray-700 text-center bg-gray-400 p-2">
            <h2 class="text-gray-900 text-center mb-1 font-medium title-font">Titanic prediction</h2>
                <input class="bg-white rounded border border-gray-400 focus:outline-none focus:border-indigo-500 text-base px-4 py-2 mb-4" placeholder="Pclass(btw 1-3)" id = "Pclass" type="text">
                <input class="bg-white rounded border border-gray-400 focus:outline-none focus:border-indigo-500 text-base px-4 py-2 mb-4" placeholder="Sex(1 or 0)" id = "Sex" type="text">
                <input class="bg-white rounded border border-gray-400 focus:outline-none focus:border-indigo-500 text-base px-4 py-2 mb-4" placeholder="Age(0-80) " id = "Age" type="text">
                <input class="bg-white rounded border border-gray-400 focus:outline-none focus:border-indigo-500 text-base px-4 py-2 mb-4" placeholder="Sibsp(0-8)" id = "Sibsp" type="text">
                <input class="bg-white rounded border border-gray-400 focus:outline-none focus:border-indigo-500 text-base px-4 py-2 mb-4" placeholder="Parch(0-6)" id = "Parch" type="text">
                <input class="bg-white rounded border border-gray-400 focus:outline-none focus:border-indigo-500 text-base px-4 py-2 mb-4" placeholder="Fare(0-512)" id = "Fare"  type="text">
                <input class="bg-white rounded border border-gray-400 focus:outline-none focus:border-indigo-500 text-base px-4 py-2 mb-4" placeholder="Embarked(0/1/2) " id = "Embarked" type="text">
                <button class="text-white bg-indigo-500 border-0 py-2 px-6 focus:outline-none hover:bg-indigo-600 rounded text-center" id = "getData"> Predict</button>
                    <p class="text-xs text-gray-500 mt-3" id = "result"></p>
                <script type="text/javascript">
                 document.getElementById("getData").addEventListener('click',getData) //this is linked with the elementbyid which is linked with the button  
                 function getData()
                 {
                    url = "http://127.0.0.1:5000/titanic/"
                    var Pclass = document.getElementById("Pclass").value.trim()
                    var Sex = document.getElementById("Sex").value.trim()
                    var Age = document.getElementById("Age").value.trim()
                    var Sibsp = document.getElementById("Sibsp").value.trim()
                    var Parch =  document.getElementById("Parch").value.trim()
                    var Fare = document.getElementById("Fare").value.trim()
                    var Embarked = document.getElementById("Embarked").value.trim()

                    final_url = url + Pclass + "/" + Sex + "/" + Age + "/" + Sibsp + "/" + Parch + "/" + Fare + "/" + Embarked 
                    // console.log(final_url)
                    fetch(final_url) 
                    .then((res)=>{return res.json()})
                    .then((data)=>{
                        let result = `<p>Prediction </p>`
                        //console.log(data)
                        const {prediction_forest,prediction_gauss,prediction_knn,prediction_logis,prediction_tree} = data 
                        result += 
                        `<p>prediction from random forest is ${prediction_forest}</p>
                         <p>prediction from Gaussnb is ${prediction_gauss}</p>
                         <p>prediction from knn is ${prediction_knn}</p>
                         <p>prediction from logis is ${prediction_logis}</p>
                         <p>prediction from tree is ${prediction_tree}</p>`;
                        document.getElementById('result').innerHTML = result;
                    }) ;
                 }
                </script>        
          </div>
        </div>
</body>
</html>